{% extends 'base.html' %}
{% block Content %}

<div class="card m-5">
    <div class="card-body">
        <form method="POST" class="mb-2" action="">
            <div class="row">
                <div class="col-8">
                    {% csrf_token %}
                    {{form.original_url}}
                </div>
                <div class="col-4">
                    <button id="submit" type="submit" class="btn btn-primary btn-lg btn-block">Shorten</button>
                </div>
            </div>
        </form>
        {% include 'messages.html' %}
        <form id="form" class="mt-3" method="GET" action="">
            <div class="input-group">
                <input class="form-control form-control-lg" type="text" id="input" value="">
                <div class="input-group-append">
                    <button id="copy-btn" type="submit" class="btn btn-primary btn-lg">Copy</button>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
    const url = {{url|safe}};

    const btn = document.getElementById("copy-btn");
    const input = document.getElementById("input");
    input.value = url;

    btn.onclick = function(event){
        event.preventDefault();
        input.select();
        document.execCommand('copy');
    }
</script>

{% endblock Content %}